<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Arkadiusz Fröhlich – Profil</title>
  <meta name="description" content="Wizytówka / Card of Arkadiusz (Arek) Fröhlich" />
  <link rel="icon" href="img/icon.png" />
<link rel="stylesheet" href="style.css" />
</head>
<body>
  <a class="skip-link" href="#home">Przejdź do treści</a>

  <!-- TOP BAR -->
  <div class="bar" role="navigation">
    <header>
      <nav aria-label="Primary">
        <a href="#home" class="brand"><h3>Arkadiusz Fröhlich</h3></a>
        <a href="#about">O mnie</a>
        <a href="#publications">Publikacje</a>
        <a href="#conferences">Konferencje</a>
        <a href="#popularyzacja">Popularyzacja</a>
        <a href="#grants">Granty</a>
        <a href="#contact">Kontakt</a>
        <div class="lang-toggle" role="group" aria-label="Wybór języka" style="margin-left:auto">
          <button type="button" data-lang="pl" aria-pressed="true">PL</button>
          <button type="button" data-lang="en" aria-pressed="false">EN</button>
        </div>
      </nav>
    </header>
  </div>

  <!-- MAIN -->
  <main id="home">
    <!-- HERO -->
    <section class="intro">
      <div class="profile-hero">
        <img
          src="img/ArkadiuszFrohlich.jpg"
          class="profile-avatar"
          loading="lazy"
          width="320"
          height="320"
        />
        <div>
          <h1>dr Arkadiusz Fröhlich</h1>

          <p class="lead" data-lang="pl">Naukowiec, przyrodnik, leśnik, zoolog i ekolog*</p>
          <p class="lead" data-lang="en" style="display:none">Scientist, naturalist, forester, zoologist, and ecologist*</p>

          <p class="kicker" data-lang="pl">Instytut Ochrony Przyrody (IOP), Polska Akademia Nauk (PAN)</p>
          <p class="kicker" data-lang="en" style="display:none">Institute of Nature Conservation (INC), Polish Academy of Sciences (PAS)</p>

          <div class="social-links">
            <a href="https://orcid.org/0000-0003-0753-6775" target="_blank" rel="noopener">ORCID</a> ·
            <a href="https://scholar.google.pl/citations?user=ScJZN28AAAAJ&hl=en" target="_blank" rel="noopener">Google Scholar</a> ·
            <a href="https://www.researchgate.net/profile/Arkadiusz-Froehlich?ev=hdr_xprf" target="_blank" rel="noopener">ResearchGate</a> ·
            <a href="https://www.linkedin.com/in/arkadiusz-fr%C3%B6hlich-1a91701ba/" target="_blank" rel="noopener">LinkedIn</a>
          </div>
        </div>
      </div>
    </section>

<br>

    <!-- ABOUT -->
    <section id="about" class="about">
      <article data-lang="pl"><h2>O mnie</h2></article>
      <article data-lang="en" style="display:none"><h2>About</h2></article>
      <div id="about-content">Wczytywanie…</div>
      <noscript>Włącz JavaScript, aby zobaczyć treść sekcji „O mnie”.</noscript>
    </section>

 <br>

    <!-- PUBLICATIONS -->
    <section id="publications">
      <article data-lang="pl"><h2>Wybrane Publikacje</h2></article>
      <article data-lang="en" style="display:none"><h2>Selected Publication</h2></article>
      <div id="publications-list">Wczytywanie…</div>
    </section>

    <!-- SEPARATOR -->
    <section class="panel" data-photos="../img/pubs1.jpg,../img/pubs2.jpg,../img/pubs3.jpg" aria-label="Separator publikacje">
      <img alt="" loading="lazy"><img alt="" loading="lazy">
    </section>

    <!-- CONFERENCES -->
    <section id="conferences">
      <article data-lang="pl"><h2>Aktywność konferencyjna</h2></article>
      <article data-lang="en" style="display:none"><h2>Conference activity</h2></article>
      <div id="conferences-list">Wczytywanie…</div>
    </section>

    <!-- SEPARATOR -->
    <section class="panel" data-photos="../img/people1.jpg,../img/people2.jpg,../img/people3.jpg" aria-label="Separator konferencje">
      <img alt="" loading="lazy"><img alt="" loading="lazy">
    </section>

    <!-- OUTREACH -->
    <section id="popularyzacja">
      <article data-lang="pl"><h2>Popularyzacja</h2></article>
      <article data-lang="en" style="display:none"><h2>Dissemination</h2></article>
      <div id="popularyzacja-list">Wczytywanie…</div>
    </section>

    <!-- SEPARATOR -->
    <section class="panel" data-photos="../img/cover1.jpg,../img/cover2.jpg,../img/cover3.jpg" aria-label="Separator popularyzacja">
      <img alt="" loading="lazy"><img alt="" loading="lazy">
    </section>

    <!-- GRANTS -->
    <section id="grants">
      <article data-lang="pl"><h2>Granty i wyróżnienia</h2></article>
      <article data-lang="en" style="display:none"><h2>Grants and distinctions</h2></article>
      <div id="grants-list">Wczytywanie…</div>
    </section>

    <!-- SEPARATOR -->
    <section class="panel" data-photos="../img/funding1.jpg,../img/funding2.jpg,../img/funding3.jpg" aria-label="Separator granty">
      <img alt="" loading="lazy"><img alt="" loading="lazy">
    </section>

    <!-- CONTACT -->
    <section id="contact" class="contact contact-flex">
      <h2 class="contact-title" data-lang="pl">Kontakt</h2>
      <h2 class="contact-title" data-lang="en" style="display:none">Contact</h2>

      <div class="contact-col">
        <img class="contact-logo" src="../img/logo-iop.png" alt="Instytut Ochrony Przyrody PAN" />
        <p class="contact-info">
          <strong data-lang="pl">Instytut Ochrony Przyrody PAN</strong>
          <strong data-lang="en" style="display:none">Institute of Nature Conservation PAS</strong><br>
          al. Adama Mickiewicza 33, 31-120 Kraków, Polska<br>
          <a href="mailto:frohlich@iop.krakow.pl">frohlich@iop.krakow.pl</a>
        </p>
      </div>

      <div class="contact-col">
        <img class="contact-logo" src="../img/logo-frohlichlab.png" alt="Fröhlich Lab" />
        <p class="contact-info">
          <strong>Arkadiusz Fröhlich lab</strong><br>
          Computative ecology without borders<br>
          <a href="../" target="_blank" rel="noopener">www.frohlich.iop.krakow.pl</a>
        </p>
      </div>
    </section>
  </main>

  <footer>
    © <span id="y"></span> Arkadiusz Fröhlich · Photos © Arkadiusz Fröhlich · Powered by INC PAS
  </footer>

  <script>
    // --- LANGUAGE TOGGLE (works for all elements in <main>) ---
    const buttons = document.querySelectorAll('.lang-toggle [data-lang]');

    function setLang(lang){
      // buttons state
      buttons.forEach(b => b.setAttribute('aria-pressed', String(b.dataset.lang === lang)));
      // toggle everything with data-lang in <main>
      document.querySelectorAll('main [data-lang]').forEach(el => {
        el.style.display = (el.dataset.lang === lang) ? '' : 'none';
      });
      try { localStorage.setItem('lang', lang); } catch(e){}
    }

    buttons.forEach(b => b.addEventListener('click', () => setLang(b.dataset.lang)));
    setLang(localStorage.getItem('lang') || 'pl');

    // --- PANELS (random rotation, lazy start when visible) ---
    function initPanels(root = document){
      const prefersReduced = matchMedia('(prefers-reduced-motion: reduce)').matches;
      const panels = root.querySelectorAll('.panel');
      panels.forEach(panel => {
        const list = (panel.dataset.photos || '').split(',').map(s => s.trim()).filter(Boolean);
        if(!list.length) return;
        const imgs = panel.querySelectorAll(':scope > img');
        if(imgs.length < 2) return;

        let a = imgs[0], b = imgs[1];
        let idx = Math.floor(Math.random() * list.length);
        a.src = list[idx]; a.classList.add('show');
        if(list.length > 1) b.src = list[(idx + 1) % list.length];

        function rotate(){
          let nextIndex = idx;
          if(list.length > 1){
            do { nextIndex = Math.floor(Math.random() * list.length); } while(nextIndex === idx);
          }
          const next = list[nextIndex];
          const hidden = a.classList.contains('show') ? b : a;
          const shown  = a.classList.contains('show') ? a : b;
          hidden.onload = () => { hidden.classList.add('show'); shown.classList.remove('show'); hidden.onload = null; };
          if(!hidden.src.endsWith(next)) hidden.src = next; else hidden.onload();
          idx = nextIndex;
        }

        const obs = new IntersectionObserver(es => {
          es.forEach(e => {
            if(e.isIntersecting){
              if(!panel._timer && !prefersReduced) panel._timer = setInterval(rotate, 7000);
            } else {
              if(panel._timer){ clearInterval(panel._timer); panel._timer = null; }
            }
          });
        }, { threshold: 0.2 });
        obs.observe(panel);
      });
    }

    // --- LOAD EXTERNAL PARTIALS ---
    Promise.allSettled([
      fetch("about.html").then(r => r.text()).then(html => {
        document.getElementById("about-content").innerHTML = html;
      }),
      fetch("../publications.html").then(r => r.text()).then(html => {
        document.getElementById("publications-list").innerHTML = html;
      }),
      fetch("conferences.html").then(r => r.text()).then(html => {
        document.getElementById("conferences-list").innerHTML = html;
      }),
      fetch("dissemination.html").then(r => r.text()).then(html => {
        document.getElementById("popularyzacja-list").innerHTML = html;
      }),
      fetch("../fundings.html").then(r => r.text()).then(html => {
        document.getElementById("grants-list").innerHTML = html;
      })
    ]).then(() => {
      initPanels(document.querySelector('main'));
      setLang(localStorage.getItem('lang') || 'pl'); // reapply after injection
    });

    // Panels already in base HTML + year
    document.addEventListener('DOMContentLoaded', () => {
      initPanels();
      const y = document.getElementById('y');
      if (y) y.textContent = new Date().getFullYear();
    });
  </script>
</body>
</html>
